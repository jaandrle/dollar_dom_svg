<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>$dom_svg — Examples</title>
    <script type="text/javascript">404: Not Found
</script>
    <script type="text/javascript" src="$dom_svg-min.js?v=0.1.1"></script>
    <style>
        body{
            color: #eeeeee;
            background: #2b2b2b;
            padding: 0 0 1em 0;
        }
        a{
            color: #b8b8ff;
        }
        a:hover{
            color: white;
        }
        summary {
            cursor: pointer;
        }
        article{
            width: 80%;
            min-width: 75em;
            max-width: 85em;
            margin: auto;
        }
        h1, h2 {
            background: #222;
            border: 1px solid #222;
            padding: .5em;
            margin-left: -.5em;
        }
        h2:target {
            border-color: currentColor;
        }
        p{
            font-size: 1.1em;
        }
        .notes{
            margin-top: .25em;
            font-size: .75em;
        }
        input, button {
            background: rgba(0,0,0,1);
            border: 1px solid #97f497;
            color: #ffffff;
            padding: .25em .5em;
            margin: 0 0 .25em 0;
        }
        input:hover, button:hover, input:focus, button:focus {
            border-color: currentColor;
        }
        [contenteditable=""]{
            display: block;
            font-family: "Lucida Console", Monaco, monospace;
            font-size: .75em;
            line-height: 1.5em;
            font-weight: bold;
            white-space: break-spaces;
            padding: 1rem;
            margin-top: -.25rem;
            border: .25rem dotted #97f497;
            background: #222;
        }
        [contenteditable=""]:before{
            content: "JavaScript (editable):";
            padding-bottom: 1em;
            color: #97f497;
            font-weight: bold;
            display: block;
            font-size: .8rem;
        }
        style[contenteditable=""]:before{
            content: "CSS (editable)";
        }
        @media screen and (max-width: 640px){
            article{
                width: 90%;
                min-width: initial;
            }
            [contenteditable=""] {
                white-space: pre;
                overflow: scroll;
                border-right-style: outset;
            }
        }
        .output{
            padding: 1rem;
            margin: 0;
            border: .25rem dotted #f0e09a;
        }
        .output:before{
            content: "Output:";
            color: #f0e09a;
            font-weight: bold;
            display: block;
            padding-bottom: 1.5rem;
        }
        .example_red_color{ color: #ff9b9b; }
        .example_blue_color{ color: #36c7ff; }
    </style>
</head>
<body>
    <article>
        <h1>$dom_svg — Examples</h1>
        <a href="https://github.com/jaandrle/dollar_dom_svg">⇠ Go back to GitHub repository</a>
        <h2 id="heading_content">Content</h2>
        <ul class="content"></ul>
        <script>
            function onKeyup(script, id){
                const el= document.getElementById(id);
                $dom.empty(el);
                eval(script.textContent);
            }
        </script>
        
        
        
        
        <p>TEST</p>
        <style style="margin-bottom: -.25rem;" contenteditable="">
            .C__chart, .C__chartDataLabel{
                --chart-data-color: 240, 223, 94;
            }
            .C__chart{
                width: 50%;
                margin: 0 25%;
                fill: white;
                stroke: white;
                font-size: 5px;
                stroke-width: 1.5;
            }
            .C__chart *{
                vector-effect: non-scaling-stroke;
            }
            .C__chartAxeX{
                text-anchor: middle;
            }
            .C__chartAxeY{
                text-anchor: end;
            }
            #data_marker{
                stroke-width: 3;
            }
            .C__chartDataLabel{
                width: 15rem;
                font-size: 5px;
            }
            .C__chartDataLabel text{
                fill: white;
            }
        </style>
        <div class="output" id="example_element_001"></div>
        <script onkeyup="onKeyup(this, 'example_element_001')" contenteditable="">
        (function(element_id){
            //EXAMPLE START
        
            const container= document.getElementById(element_id);
            simpleSVGChart({ dataX: [ 0, 2, 3, 4, 6 ], dataY: [ -2, -5, 1, 0, 20 ] }).mount(container);
            simpleSVGChartDataLabel().mount(container);
        
            function simpleSVGChart({ dataX, dataY }){
                const /* helpers */
                    { min, max }= Math,
                    { getAreasSizes, getDataMetric, getAxeXParams, getAxeYParams, dataToPolylinePoints }= $dom_svg.chart_helpers,
                    { addAxeWrapper, addAxeLine, addLabelsTicksForAxeX, addLabelsTicksForAxeY, addCanvasWrapper }= $dom_svg.chart_parts;
                const /* chart global params */
                    [ viewBox, axis, chart ]= getAreasSizes([ 15, 8 ]),
                    metric= getDataMetric(chart, [ max(...dataX), max(...dataY) ], [ min(0, ...dataX), min(0, ...dataY) ]);
                const /* axis params */
                    size= 2.5,
                    axe_x= getAxeXParams(axis, chart, metric, { size }),
                    axe_y= getAxeYParams(axis, chart, metric, { step: 5, size, labelMap: t=> `${t}°C` });
                const { add, component, share }= $dom.component("svg", { className: "C__chart", viewBox });
                    component(addAxeWrapper(axe_x));
                        component(addAxeLine(axe_x));
                        component(addLabelsTicksForAxeX(axe_x), -1);
                    component(addAxeWrapper(axe_y), -2);
                        component(addAxeLine(axe_y));
                        component(addLabelsTicksForAxeY(axe_y), -1);
                    component(addCanvasWrapper({ axis, chart }), -2);
                        add("polyline", Object.assign({ points: dataToPolylinePoints({ metric, dataX, dataY }), stroke: "rgb(var(--chart-data-color))", fill: "none" }, markerReference("data_marker")));
                    add("defs", null, -2);
                        component(markerComponent({ id: "data_marker", fill: "rgba(var(--chart-data-color), .25)", stroke: "rgb(var(--chart-data-color))" }))
                return share;
                
                function markerReference(id){
                    const url= `url(#${id})`;
                    return { "marker-start": url, "marker-mid": url, "marker-end": url };
                }
                function markerComponent({ id, fill, stroke, size= 3.5 }){
                    const { add, share }= $dom.component("marker", {
                        id, fill, stroke,
                        viewBox: "0 0 10 10", refX: 5, refY: 5,
                        markerWidth: size, markerHeight: size
                    }, { namespace_group: "SVG" });
                        add("circle", { cx: 5, cy: 5, r: 4 });
                    return share;
                }
            }
            function simpleSVGChartDataLabel(){
                const dy= "4%";
                const { add, share }= $dom.component("svg", { className: "C__chartDataLabel", viewBox: "0 0 50 30" });
                    add("polyline", { points: "0,10 10,10 20,10", stroke: "rgb(var(--chart-data-color))", fill: "none", "marker-mid": "url(#data_marker)" });
                    add("text", { textContent: "Value1", x: 25, y: 10, dy }, -1);
                    add("polyline", { points: "0,20 10,20 20,20", stroke: "grey", fill: "none" }, -1);
                    add("text", { textContent: "Value2", x: 25, y: 20, dy }, -1);
                return share;
            }
            //EXAMPLE END
        })("example_element_001");
        </script>
        <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_svg/blob/master/docs/examples.html#L160" target="_blank">View with highliting (link to source of this file)</a></p>

        
        <p>TEST</p>
        <style style="margin-bottom: -.25rem;" contenteditable="">
            .C__thermometer{
                height: 10rem;
            }
        </style>
        <div class="output" id="example_element_002"></div>
        <script onkeyup="onKeyup(this, 'example_element_002')" contenteditable="">
        (function(element_id){
            //EXAMPLE START
        
            const container= document.getElementById(element_id);
            //$dom_svg.global_defs.mount(container); example reload is async!!
            thermometerComponent({ temperature: 25 }).mount(container);
            thermometerComponent({ temperature: 5 }).mount(container);
        
            function thermometerComponent({ temperature= 25, className= "C__thermometer" }){
                const range= [ 5, 25 ];
                const { min, max }= Math;
                temperature= max(range[0], min(temperature, range[1]));
                const /* create SVG defs */
                    mask_id= $dom_svg.global_defs.add("thermometer_mask_"+temperature, defineMask.bind(null, { size: temperature })),
                    gradient_id= $dom_svg.global_defs.add("thermometer_gradient", defineLinearGradient);
                const { add, component, share }= $dom.component("svg", { viewBox: `0 0 20 40`, fill: "none", className });
                    component(border());
                    add("path", { 
                        fill: `url(#${gradient_id})`, mask: `url(#${mask_id})`,
                        d: "M3 30.9724C3 29.0972 3.86664 27.3558 5.33336 26.2173L6.33336 25.4136V5.67891C6.33336 4.20552 7.53336 3 9 3C10.4666 3 11.6666 4.20552 11.6666 5.67891V25.4137L12.6666 26.2174C14.1333 27.3559 15 29.0972 15 30.9725C15 34.3211 12.3334 37 9 37C5.66664 37 3 34.3211 3 30.9724Z"
                    }, -1);
                return share;
        
                function border(color= "#A9A9A9"){
                    return $dom.component("path", {
                        fill: color,
                        'fill-rule': "evenodd",
                        'clip-rule': "evenodd",
                        d: "M0 30.6666C0 35.8 4.04999 40 9 40C13.95 40 18 35.8 18 30.6667C18 27.8667 16.8429 25.3334 14.7857 23.5334V6C14.7857 2.66664 12.2143 0 9 0C5.7857 0 3.2143 2.66664 3.2143 6V23.5333C1.15714 25.3333 0 27.8666 0 30.6666ZM4.50004 6C4.50004 3.4 6.49286 1.33336 9 1.33336C11.5071 1.33336 13.5 3.4 13.5001 6V23.8666C13.5001 24.0666 13.6286 24.2666 13.7572 24.4C15.6215 25.9333 16.7143 28.2 16.7143 30.6666C16.7143 35.0666 13.2429 38.6666 9.00008 38.6666C4.75723 38.6666 1.28581 35.0666 1.28581 30.6666C1.28581 28.2 2.37861 25.9334 4.24292 24.4C4.43578 24.2666 4.50004 24.0666 4.50004 23.8666V6Z"
                    }, { namespace_group: "SVG" }).share;
                }
            }
            function defineLinearGradient(){
                const { add, share }= $dom.component("linearGradient", { x1: 3, y1: 3, x2: 3, y2: 37, gradientUnits: "userSpaceOnUse" }, { namespace_group: "SVG" });
                    add("stop", { 'stop-color': "#D01F29" });
                    add("stop", { 'stop-color': "#B2B2B2", offset: "0.507707" }, -1);
                    add("stop", { 'stop-color': "#046FBC", offset: "1" }, -1);
                return share;
            }
            function defineMask({ size= 25, fill= "white" }){
                const { add, share }= $dom.component("mask", {
                    'mask-type': "alpha", maskUnits: "userSpaceOnUse",
                    x: 0, y: -1.65*size+43.25, /* linearni regrese */
                    width: 20, height: 1.65*size-6.25 /* linearni regrese */
                }, { namespace_group: "SVG" });
                    add("rect", { height: "100%", width: "100%", fill });
                return share
            }
        
        //EXAMPLE END
        })("example_element_002");
        </script>
        <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_svg/blob/master/docs/examples.html#L229" target="_blank">View with highliting (link to source of this file)</a></p>


        <script>
            document.addEventListener("paste", function enableInScriptTags(ev){
                ev.preventDefault();
                document.execCommand('insertText', false, ev.clipboardData.getData('text/plain'));
            });
            document.addEventListener("keydown", function enableInScriptTags(ev){
                if(ev.target.tagName!=="SCRIPT"&&ev.target.tagName!=="STYLE") return false;
                const { keyCode }= ev;
                if(keyCode!==9&&keyCode!==13) return false;

                ev.preventDefault();
                document.execCommand('insertText', false, keyCode===9 ? "    " : "\n                ");
            });
            let h2_counter= 0;
            const content_ul= document.getElementsByClassName('content')[0];
            [ ...document.getElementsByTagName('h2') ].forEach(function(el){
                const textContent= el.textContent;
                if(textContent==="Content") return false;
                const id= "heading_"+h2_counter++;
                contentH2({ textContent, id }).mount(el, "replace");
                contentLI({ textContent, id }).mount(content_ul);
            });
            function contentLI({ textContent, id }){
                const href= "#"+id;
                const { add, share }= $dom.component("LI", null);
                    add("A", { textContent, href });
                return share;
            }
            function contentH2({ textContent, id }){
                const { add, share }= $dom.component("H2", { id });
                    add("A", { textContent: "⇡", href: "#heading_content" });
                    add("SPAN", { textContent: " "+textContent }, -1);
                return share;
            }
        </script>
    </article>
</body>
</html>